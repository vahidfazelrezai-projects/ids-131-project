import requests
import os

mapping = {
    'Alabama': 1,
    'Alaska': 10,
    'Arizona': 17,
    'Arkansas': 12,
    'California': 24,
    'Colorado': 81,
    'Connecticut': 88,
    'Delaware': 95,
    'District of Columbia': 500,
    'Florida': 97,
    'Georgia': 121,
    'Hawaii': 133,
    'Idaho': 143,
    'Illinois': 146,
    'Indiana': 167,
    'Iowa': 136,
    'Kansas': 179,
    'Kentucky': 184,
    'Louisiana': 191,
    'Maine': 199,
    'Maryland': 221,
    'Massachusetts': 210,
    'Michigan': 230,
    'Minnesota': 247,
    'Mississippi': 266,
    'Missouri': 256,
    'Montana': 272,
    'Nebraska': 289,
    'Nevada': 314,
    'New Hampshire': 293,
    'New Jersey': 296,
    'New Mexico': 310,
    'New York': 317,
    'North Carolina': 274,
    'North Dakota': 287,
    'Ohio': 349,
    'Oklahoma': 369,
    'Oregon': 376,
    'Pennsylvania': 382,
    'Rhode Island': 403,
    'South Carolina': 406,
    'South Dakota': 498,
    'Tennessee': 413,
    'Texas': 423,
    'Utah': 454,
    'Vermont': 470,
    'Virginia': 458,
    'Washington': 472,
    'West Virginia': 492,
    'Wisconsin': 482,
    'Wyoming': 496
}
years = [
    2016,
    2012,
    2008,
    2004,
    2000,
    1996,
    1992,
    1988,
    1984,
    1980,
    1976,
    1972,
    1968,
    1964,
    1960,
    1956,
    1952,
    1948,
    1944,
    1940,
    1936,
    1932,
    1928,
    1924,
    1920
]

for year in years:
    for state in mapping.keys():
        r = requests.get('http://library.cqpress.com/elections/download-data-results.php?filetype=1&office=1&areatype=2&year=' + str(year) + '&states%5B%5D=' + str(mapping[state]) + '&format=3&license=on&emailto=&emailfrom=')
        f = open('../data/votes-' + str(year) + '-' + str(state) + '.csv', 'w')
        f.write(r.text.encode('utf-8'))
        f.close()